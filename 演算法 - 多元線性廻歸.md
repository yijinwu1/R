# 多元線性迴歸
*   從找出影響因素到進一步解釋目標
<table>
    <tr>
        <td> </td>
		<td>關聯性</td>
		<td>解釋力</td>
    </tr>
    <tr>
        <td>目的</td>
		<td>建立目標和變數間的關聯性</td>
		<td>解釋目標大部分的變異</td>
    </tr>
    <tr>
        <td>方法</td>
		<td>1.影響力的係數<br>2.統計上的顯著性</td>
		<td>1.解釋能力<br>2.基本的預測能力</td>
    </tr>
    <tr>
        <td>解決方案</td>
		    <td colspan="2">找出可能具有影響力的解釋變數<br>建立目標(被解釋變數)和解釋變數間的關聯性<br>確定此關聯性，能充分解釋目標的變異</td>
    </tr>	
</table> 

*   釐清目標和各個變數間的關係
![ubuntu1](../master/images/linerRegression1.png)
						 
1.  建立目標(Y，被解釋變數)和各變數(X，解釋變數)間的線性關係<br>
2.  估計各各解釋變數的係數β，使此線性組合能去逼近真實的目標
3.  不論目標怎麼變化，都能用此組合掌握，並進一步解釋
 
*   用最簡單的數學來詮釋簡單的廻歸模型 
![ubuntu1](../master/images/linerRegression2.png)
 
* y = ax + b
  * 圖中的藍線，可以表示成這個形式
  * 藍線能夠大致解釋紅色資料點的變化
  * 推廣到多維，就是多元迴歸分析

<table>
    <tr>
        <td colspan="3">演算法流程</td>	
	</tr>
    <tr>
        <td>Step 1: 選取和目標可能有關的變數<br>Step 2: 透過最適化的流程，估計出各變數的係數<br>Step 3: 估計出一組係數，使其與真實的Y誤差最小</td>	 
        <td>===></td>
		<td>不僅能夠解釋各個變數的係數，<br>最小化誤差也隱含<br>此模型具有一定的預測能力。</td>
    </tr>	
</table> 	
        
<table>
    <tr>
        <td> </td>
		<td>解釋力</td>
		<td>預測力</td>
    </tr>
    <tr>
        <td>效果</td>
		<td>1.透過X的係數，了解它們如何影響Y<br>2.新增/去除某個變數後，各個變數的影響力會如何變化</td>
		<td>1.解釋了Y大部分的變異後，此模型及抓到Y的趨勢<br>2.即使存在誤差，我們有信心說這是一個好的方法預測目標</td>
    </tr>
    <tr>
        <td>說明</td>
		<td>β的係數是1000，表示X增加1時，Y會增加1000</td>
		<td>無論各變數怎麼變化，都可以放入迴歸模型，得到預測的Y值</td>
    </tr>	
</table> 
 
* 透過假說思考驗證
  * 1.模型是否有足夠的解釋力
  * 2.變數對於目標的解釋力與意義
  * 3.模型本身是否有意義
 
* 假說思考
  * 提出假說:針對商業命題，對不同的變數、模型提出初步的假設
  * 驗證假說:透過數學及統計上的意義，驗證假說是否成立
  * 回答問題:以驗證的結果，回答商業分析的命題
 
* 迴歸分析的計算核心 - 最小平方法
![ubuntu1](../master/images/linerRegression3.png)
  * 綠色虛線表示原始資料點(紅點)到預測資料點(藍線)的距離(殘差)
  * 利用最適化的方法估計出一組係數，使得殘差平方和最小

<table>
    <tr>
        <td>最小平方法流程</td>	
	</tr>
    <tr>
        <td>Step 1: 選定一組係數，並計算誤差的平方總和 <br>Step 2: 往誤差更小(維分、梯度)的方向修正，並更新係數<br>Step 3: 重複 Step 1 & Step 2，直到誤差的平方總和最小為止</td>	 
    </tr>	
</table>   

<table>
    <tr>
        <td colspan="5">透過假設檢定探討迴歸模型的統計意義</td>
    </tr>
    <tr>
	    <td></td>
        <td>提出假說</td>
		<td>驗證假說</td>
		<td></td>
		<td>進行修正</td>
    </tr>
    <tr>
	    <td>R平方</td>
        <td>目前的模型足以解釋Y大部分的變異<br>(模型對目標的解釋能力)</td>
		<td>計算R平方值</td>
		<td>------><br>解釋力過低</td>
		<td>納入新的變數<br>進行變數轉換<br>嘗試不同變數組合</td>
    </tr>
    <tr>
	    <td>F檢定</td>
        <td>目前的模型至少有一些解釋Y變異的能力<br>(針對整個模型進行檢定)</td>
		<td>H0:模型不具解釋能力<br>H1:模型至少有解釋能力</td>
		<td>------><br>無法拒絕<br>虛無假設</td>
		<td>納入新的變數<br>進行變數轉換<br>嘗試不同變數組合</td>
    </tr>
    <tr>
	    <td>t檢定</td>
        <td>使用的X變數對於Y至少有一些解釋能力<br>(針對單一變數進行檢定)</td>
		<td>H0:該變數不具解釋能力<br>H1:該變數至少有解釋能力</td>
		<td>------><br>無法拒絕<br>虛無假設</td>
		<td>剔除該變數<br>嘗試不同變數組合</td>
    </tr>	
</table> 

 *   <h1>凡有預測，必有誤差
 

![ubuntu1](../master/images/linerRegression4.png)
* 殘差的三個假設
  * 殘差分布是很均勻的散落在零的上下
  * 在不同的X值或不同的Y值，殘差是沒有明顯趨勢 
  * 剩餘隨機分布的誤差，模型無法再優化，即可輔助商業決策

 *   總結迴歸模型與假說思考的流程
 <table>
    <tr>
        <td>提出假說</td>	 
        <td>驗證假說</td>
		<td></td>
		<td>回答問題</td>
    </tr>
    <tr>
        <td>從樣本的觀察中，對解釋變數X和目標Y之間的關聯提出假說</td>	 
        <td>1.利用最小平方法建立迴歸模型<br>2.檢定變數及模型的解釋能力和統計顯著性</td>
		<td>-------><br>通過</td>
		<td>解釋力:從係數說明各X對於目標Y的影響<br>預測力:利用模型更準確地預測目標Y值</td>
    </tr>	
</table>
